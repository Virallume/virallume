(function(){"use strict";process.env.NODE_ENV;const a={style:"professional",emoji_frequency:"moderate",hashtag_count:3},o=r=>{const t=["#trending","#viral","#socialmedia"];return`${r}

${["ðŸ”¥","âœ¨","ðŸ’«"].join(" ")}

${t.join(" ")}`},c=async(r,t)=>{try{return{success:!0,data:o(r)}}catch(e){return console.error("Transform text error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to transform text"}}},i=async()=>{try{return{success:!0,data:["#trending","#viral","#socialmedia"]}}catch(r){return console.error("Get trends error:",r),{success:!1,error:r instanceof Error?r.message:"Failed to fetch trends"}}};chrome.runtime.onInstalled.addListener(async r=>{(r.reason==="install"||r.reason==="update")&&chrome.storage.local.set({preferences:a,analytics:{transforms:0,trendsChecks:0}})}),chrome.runtime.onMessage.addListener((r,t,e)=>{switch(r.type){case"TRANSFORM_TEXT":return l(r.text,r.preferences||a).then(e),!0;case"GET_TRENDS":return u().then(e),!0;case"TRACK_EVENT":m(r.event,r.data),e({success:!0});break}return!0});async function l(r,t){try{const{analytics:e={transforms:0}}=await chrome.storage.local.get("analytics");if(e.transforms>=5)return{success:!1,error:"You have reached your free generation limit. Please try again later."};const s=await c(r,t);if(!s.success)throw new Error(s.error);return await chrome.storage.local.set({analytics:{...e,transforms:e.transforms+1}}),{success:!0,data:s.data}}catch(e){return console.error("Text transformation error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to transform text"}}}async function u(){try{const r=await i();if(!r.success)throw new Error(r.error);const{analytics:t={trendsChecks:0}}=await chrome.storage.local.get("analytics");return await chrome.storage.local.set({analytics:{...t,trendsChecks:t.trendsChecks+1}}),{success:!0,data:r.data}}catch(r){return console.error("Get trends error:",r),{success:!1,error:r instanceof Error?r.message:"Failed to get trends"}}}function m(r,t){const e={event:r,timestamp:Date.now(),data:t};chrome.storage.local.get(["analytics"],s=>{const n=s.analytics||[];n.push(e),chrome.storage.local.set({analytics:n})})}})();
