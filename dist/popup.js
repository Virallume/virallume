(function(){"use strict";process.env.NODE_ENV;const r={API_KEYS:"api_keys",PREFERENCES:"preferences",ANALYTICS:"analytics"};document.addEventListener("DOMContentLoaded",async()=>{const a=document.getElementById("manual-input"),c=document.getElementById("generate-btn"),o=document.getElementById("result"),s=document.getElementById("error"),l=document.getElementById("credits-left");await(async()=>{try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(e!=null&&e.id)){console.error("No active tab found");return}const[{result:t}]=await chrome.scripting.executeScript({target:{tabId:e.id},func:()=>{var n;return((n=window.getSelection())==null?void 0:n.toString().trim())||""}});t&&(a.value=t,a.focus())}catch(e){console.error("Error getting selected text:",e)}})(),chrome.storage.local.get(r.ANALYTICS,e=>{const t=e[r.ANALYTICS]||{transforms:0},n=Math.max(0,5-t.transforms);l.textContent=n.toString()}),c.addEventListener("click",async()=>{const e=a.value.trim();if(!e){i("Please enter or select text to generate a post.");return}try{c.disabled=!0,o.style.display="none",s.style.display="none";const t=await chrome.runtime.sendMessage({type:"TRANSFORM_TEXT",text:e});t.success&&t.data?(d(t.data),chrome.storage.local.get(r.ANALYTICS,n=>{const u=n[r.ANALYTICS]||{transforms:0},m=Math.max(0,5-u.transforms);l.textContent=m.toString()})):i(t.error||"Failed to generate post")}catch(t){i(t instanceof Error?t.message:"An error occurred")}finally{c.disabled=!1}});function d(e){o.textContent=e,o.style.display="block",s.style.display="none"}function i(e){s.textContent=e,s.style.display="block",o.style.display="none"}})})();
